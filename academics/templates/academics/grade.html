{% extends "base.html" %}
    {% block content %}
       <div id="grade">
         <form>
           {% csrf_token %}
        {{form.as_p}}
       
        <button id="grade-btn"onclick=creategrade()>Create</button>
         </form>
<script>
    function creategrade() {
       var grade = document.getElementById('id_grade').value
       
   
       fetch('https://schooltestproject.herokuapp.com/academics/grades/',
            {
           method: 'POST',
           body: JSON.stringify({ 'grade': grade }
           ),
           headers: {
               'Accept':'application/json',
               'Content-Type': 'application/json',
               'Authorization':'token'+' '+token 
           },
       })

       .then(function(response) {
           if (response.ok) {
               console.log("Sucess response",response)
               return response.json();
           } else {
               throw new Error("Could not reach the API: " + response.statusText);
           }
       }).then(function(data) {
       }).catch(function(error) {
          console.log(error.message)
       });
   return true;
}
</script>

        </div>
        <div>

            <table class="table">
                <thead class="thead">
                  <tr>                   
                    <th scope="col">Grade</th>                
                  </tr>
                </thead>
                {% for l in grade %}
              
      
                <tbody>                   
                  <tr>                   
                    <td>{{l.grade}}</td>                                  
                  </tr>
              
                  {% endfor %}
              
          </tbody>
      </table>
              
                


            
        </div>
        

    {% endblock %}